# üõ†Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `testify`

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST API** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Go** –∏ –ø–∞–∫–µ—Ç–∞ `testify`. –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ñ–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (count)** –∏ **–≥–æ—Ä–æ–¥ (city)**.

üìç **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã API:**
- –ü—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Å–ø–∏—Å–æ–∫ –∫–∞—Ñ–µ**.
- –ï—Å–ª–∏ **–≥–æ—Ä–æ–¥ —É–∫–∞–∑–∞–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚Üí –æ—à–∏–±–∫–∞ `400 Bad Request` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `wrong city value`.
- –ï—Å–ª–∏ **–∑–∞–ø—Ä–æ—Å–∏–ª–∏ –∫–∞—Ñ–µ –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å –≤ –±–∞–∑–µ** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è **–≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ñ–µ**.

## üî• **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å API**
- **GET `/cafe`** ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ñ–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  - `count` ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ñ–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å
  - `city` ‚Äì –≥–æ—Ä–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–∞—Ñ–µ (–¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ `moscow`)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
### **–ö–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã?**
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å** ‚Äì API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200 OK` –∏ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ –Ω–µ –ø—É—Å—Ç–æ–µ.  
‚úÖ **–û—à–∏–±–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞** ‚Äì API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `400 Bad Request` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `wrong city value`.  
‚úÖ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ñ–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–µ** ‚Äì API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏.  

### **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**
```sh
go test ./...
```

## üì¶ **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**
- üìù **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: Go
- üîç **–§—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: `testify`
- üåç **–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏**: JSON, HTTP

## üõ† **–†–∞–±–æ—Ç–∞ —Å `testify`**
–ü–∞–∫–µ—Ç `testify` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (`assert` –∏ `require`).

üìç **–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `assert` –∏ `require`:**
- **`assert`** ‚Äì –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ—Å—Ç –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏.
- **`require`** ‚Äì –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç, —Ç–µ—Å—Ç **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è**.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```go
assert.Equal(t, expected, actual, "–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç")
require.NotNil(t, response.Body, "–û—Ç–≤–µ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
```

## üöÄ **–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å API –∏ —Ç–µ—Å—Ç—ã?**
1Ô∏è‚É£ **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```sh
go run main.go
```
2Ô∏è‚É£ **–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã:**
```sh
go test ./...
```
